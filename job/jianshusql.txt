1)文章需要显示的内容
 	文章的id,作者，作者头像，文章的时间，文章的标题，文章的内容，文章的类别，文章的评论数，点赞数，（阅读量）

select blog_id,title,blo_cat.created_at,content,categoryname,head,peo.userid from
(select blog_id,title,created_at,content,categoryname,user_id from blog blo join category cat on blo.category_id=cat.category_id)  blo_cat
join user  peo on blo_cat.user_id=peo.userid


//查询出文章与用户与分类的关系
select a.blog_id,a.title,a.blo_time,a.content,a.categoryname,a.head,a.userid from

(
select blog_id,title,blo_cat.created_at as blo_time,content,categoryname,head,peo.userid as userid from
(select blog_id,title,created_at,content,categoryname,user_id from blog blo join category cat on blo.category_id=cat.category_id)  blo_cat
join user  peo on blo_cat.user_id=peo.userid
) as a

//查询出文章评论与喜欢的个数
select lik.blog_id,lik.lik_num,com.com_num from 
(select count(*) as lik_num,blog_id from jianshu2.like GROUP BY blog_id) lik JOIN
(select count(*) as com_num,blog_id from jianshu2.comment GROUP BY blog_id) com on lik.blog_id=com.blog_id


//最终结果
 select IF(a.nickname is null,"雷锋",a.nickname) as nickname,a.blog_id as blog_id,a.title as title,a.blo_time as time,a.content as content,a.categoryname as categoryname,IF(a.head is null,"888888.jpg",a.head) as head,a.userid as userid,IF(com_like.com_num is null,0,com_like.com_num) as com_num,IF(com_like.lik_num is null,0,com_like.lik_num) as lik_num from
(
		select blog_id,title,blo_cat.created_at as blo_time,content,categoryname,head,peo.userid as userid,peo.nickname as nickname from
 		(select blog_id,title,created_at,content,categoryname,user_id from blog blo join category cat on blo.category_id=cat.category_id)  blo_cat
 		join user  peo on blo_cat.user_id=peo.userid
 ) as a left join 
 (
	select lik.blog_id as blog_id,lik.lik_num,com.com_num from 
	(select count(*) as lik_num,blog_id from jianshu2.like GROUP BY blog_id) lik JOIN
	(select count(*) as com_num,blog_id from jianshu2.comment GROUP BY blog_id) com on lik.blog_id=com.blog_id

 ) as com_like on a.blog_id=com_like.blog_id

2）
	作者头像，作者昵称，写了多少字，多少人喜欢

	喜欢个数:select count(like_id),blog_id from jianshu2.like GROUP BY blog_id;

	作者文章的字数:select user_id,SUM(size) from jianshu2.blog group by user_id;

	头像与昵称：select IF(head is null,"888888.jpg",head) as head,IF(nickname is null,"雷锋",nickname) as nickname from user;
	

	SELECT size.user_id as userid,su,size.blog_id as blog_id from
		(select user_id,SUM(size) as su,blog_id from jianshu2.blog group by user_id) size left join
		(select count(like_id) as lik_num,blog_id from jianshu2.like GROUP BY blog_id) lik on size.blog_id=lik.blog_id
关注
	select *
		from user user join 
	select sum(size) from blog group by userid

select count(like_id),blog_id from like group by blog_id


//用户收获的喜欢数
select count(lik_num),user_id FROM
(select count(like_id) as lik_num,blog_id from jianshu2.like group by blog_id) as lik_num right join blog on lik_num.blog_id=blog.blog_id group by user_id



//作者所写的字数
select user_id,SUM(size) from jianshu2.blog group by user_id

//作者的头像，昵称
select IF(head is null,"888888.jpg",head) as head,IF(nickname is null,"

雷锋",nickname) as nickname from user;

//收获的喜欢数
select IF(sum(lik_num) is null ,0,sum(lik_num)) as sum_lik,user_id FROM
(select count(like_id) as lik_num,blog_id from jianshu2.like group by blog_id) as lik_num right join blog on lik_num.blog_id=blog.blog_id group by user_id


//最终结果
SELECT nickname ,userid,head,sum(size) as size,sum(like_count) as sum_like FROM (
SELECT `user`.userid,`user`.head, `user`.nickname,blog.blog_id,blog.size, count(distinct `like`.like_id) as like_count
FROM blog 
LEFT JOIN `like` ON blog.blog_id = `like`.blog_id 
LEFT JOIN `category` ON blog.category_id = `category`.category_id
LEFT JOIN `user` ON blog.user_id = `user`.userid 
GROUP BY blog.blog_id 
) p
GROUP BY userid order by sum_like desc limit 0,5 